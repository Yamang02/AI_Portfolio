# OnTheTrain - 여행 계획 스케줄러

## 개요
OnTheTrain은 KH정보교육원 팀 프로젝트로 개발된 여행 계획 스케줄러 웹 애플리케이션입니다. 사용자가 여행 일정, 숙소, 승차권을 통합적으로 관리할 수 있는 플랫폼으로, 직관적인 캘린더 인터페이스와 드래그 앤 드롭 기능을 제공합니다.

## 주요 기능
- **통합 스케줄 관리:** 일정, 숙소, 승차권을 하나의 스케줄러에서 관리
- **캘린더 인터페이스:** 직관적인 캘린더 기반 일정 관리
- **드래그 앤 드롭:** 요소 간 위치 교체 및 시간 조정
- **관광정보 검색:** 관광공사 API 연동으로 관광지 정보 검색
- **모달 시스템:** 생성/수정/조회를 위한 모달 인터페이스

## 기술 스택
- **프론트엔드:** HTML, CSS, JavaScript
- **백엔드:** Java, Spring Boot Framework
- **데이터베이스:** Oracle
- **외부 API:** 한국관광공사 API
- **라이브러리:** DayPilot (캘린더), jQuery
- **기타:** JSP, Servlet

## 데이터베이스 설계

### ERD 구조
- **스케줄러 테이블:** 기본 스케줄 정보 관리
- **일정 테이블:** 여행 일정 정보 (시작/종료시간 포함)
- **숙소 테이블:** 숙박 정보 (시작/종료시간 포함)
- **승차권 테이블:** 교통 정보 (시작/종료시간 포함)
- **지역코드 테이블:** API 호출 후 내부 저장된 지역 정보

### 주요 테이블
- **스케줄러 (Scheduler):** 스케줄 기본 정보
- **일정 (Schedule):** 여행 일정 상세 정보
- **숙소 (Accommodation):** 숙박 정보
- **승차권 (Ticket):** 교통 정보
- **지역코드 (RegionCode):** 지역 정보
- **사용자 (Users):** 사용자 계정 정보

### 설계 특이사항
- 각 요소 ID는 `요소명_생성시간_랜덤값` 형태로 구성
- 공통 필드(시작/종료시간)는 별도 테이블로 통합 고려했으나 유지비용 증가로 분리
- 스케줄러 사진은 공통이므로 별도 참조관계 설정하지 않음
- 요소 특화 정보는 JSON으로 관리 가능

## 구현 기능 상세

### 1. 페이지 UI 구성 (3영역)

#### 캘린더 영역
- DayPilot 라이브러리 활용한 인터랙티브 캘린더
- 일정, 숙소, 승차권을 시각적으로 표시
- 직접 시간 수정 가능

#### 요소 관리 영역
- 추가/삭제 기능
- 드래그 앤 드롭으로 위치 교체
- 필터링된 요소 관리

#### 요소 검색 영역
- 관광공사 API 활용한 관광지 검색
- 검색 결과를 스케줄에 추가
- 지역코드 자동 저장

### 2. 모달 시스템

#### 생성/수정 모달
- JS 객체 배열로 요소 관리
- 사진 미리보기 기능
- 초기화 및 버튼 노출 조건 분기
- 실시간 유효성 검사

#### 조회 모달
- 요소 ID 기반 정보 표시
- 이미지 확대 보기 기능
- 상세 정보 표시

### 3. CRUD 기능

#### 생성 (Create)
- `+` 버튼 클릭으로 새 요소 생성
- 캘린더 빈 칸 클릭으로 생성
- 검색 요소 추가
- 조건에 따라 '추가 대기 요소' 또는 '추가된 요소'에 바로 반영

#### 조회 (Read)
- 생성된 카드 클릭으로 상세 조회
- 캘린더 요소 클릭으로 조회
- 모달을 통한 상세 정보 표시

#### 수정 (Update)
- 모달 내 수정 버튼으로 정보 수정
- 드래그 앤 드롭으로 위치 교체
- 캘린더 내 직접 시간 수정 (DayPilot 라이브러리 활용)
- 실시간 업데이트

#### 삭제 (Delete)
- 모달 내 삭제 기능
- 삭제모드 도입 (필터링된 요소 클릭 시 바로 삭제)
- 캘린더 내 `x` 버튼으로 삭제 처리
- 확인 메시지 출력

## 특별 기능

### 드래그 앤 드롭 시스템
- 요소 간 위치 교체
- 시간대 변경
- 시각적 피드백 제공

### 관광정보 API 연동
- 한국관광공사 API 활용
- 지역코드 자동 저장
- 관광지 정보 실시간 검색

### 삭제모드
- 필터링된 요소 클릭 시 바로 삭제
- 대량 삭제 작업 효율성 향상
- 실수 방지를 위한 확인 절차

## 프로젝트 구조
```
OnTheTrain/
├── src/
│   ├── main/
│   │   ├── java/
│   │   │   ├── controller/
│   │   │   ├── service/
│   │   │   ├── dao/
│   │   │   ├── dto/
│   │   │   ├── api/
│   │   │   └── util/
│   │   ├── webapp/
│   │   │   ├── WEB-INF/
│   │   │   ├── css/
│   │   │   ├── js/
│   │   │   ├── images/
│   │   │   └── jsp/
│   │   └── resources/
│   └── test/
├── docs/
├── sql/
└── external/
    └── api/
```

## 개발 과정

### 1단계: 요구사항 분석
- 여행 스케줄러 기능 정의
- 사용자 시나리오 작성
- API 연동 계획 수립

### 2단계: 데이터베이스 설계
- ERD 설계 및 최적화
- API 데이터 저장 구조 설계
- 요소별 테이블 분리 결정

### 3단계: 백엔드 개발
- Spring MVC 구조 설정
- 관광공사 API 연동 구현
- CRUD 기능 구현

### 4단계: 프론트엔드 개발
- DayPilot 캘린더 연동
- 드래그 앤 드롭 기능 구현
- 모달 시스템 개발

### 5단계: 통합 및 테스트
- API 연동 테스트
- 사용자 테스트
- 성능 최적화

## 관련 링크
- [DB 설계](https://yamang93.tistory.com/40)
- [UI 및 모달 소개](https://yamang93.tistory.com/41)
- [CRUD 기능](https://yamang93.tistory.com/42)

## 학습 성과
- 외부 API 연동 및 데이터 관리 경험
- 복잡한 UI/UX 구현 능력 향상
- 드래그 앤 드롭 등 인터랙티브 기능 개발
- 팀 프로젝트 협업 경험
- 캘린더 라이브러리 활용 능력 향상 