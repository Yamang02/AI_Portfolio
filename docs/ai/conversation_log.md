# AI Portfolio Chatbot - 대화 로그 및 주요 결정사항

## 📋 프로젝트 개요
- **프로젝트명**: AI Portfolio Chatbot
- **목적**: 개발자 포트폴리오 사이트에 AI 챗봇 통합
- **기술 스택**: React 19.1.0, TypeScript, Vite, Google Gemini API
- **배포 대상**: Google Cloud Run

## 🎯 주요 목표
1. Google Cloud Run에 배포
2. 실제 GitHub 레포지토리 연결
3. 실제 소개 URL 연결
4. 프로덕션 환경 최적화

## 📝 주요 결정사항

### 1. 배포 아키텍처
- **플랫폼**: Google Cloud Run
- **이유**: 
  - 서버리스 아키텍처로 비용 효율적
  - 자동 스케일링 지원
  - HTTPS 자동 설정
  - 글로벌 CDN 제공

### 2. 환경 변수 관리
- **Gemini API Key**: Google Cloud Secret Manager 사용
- **환경별 설정**: 개발/스테이징/프로덕션 분리
- **보안**: API 키를 소스코드에 하드코딩하지 않음

### 3. 데이터 소스 개선 ✅ (GitHub API 단순화)
- **현재**: constants.ts에 하드코딩된 프로젝트 데이터
- **개선 방향**: 
  - ✅ GitHub API 우선 방식 채택: 단순하고 효율적
  - ✅ 24시간 캐시 유효기간 설정
  - ✅ GitHub API 실패 시 기본 프로젝트 폴백
  - ✅ README는 GitHub API에서 동적 로딩
  - ✅ ProjectService 클래스로 통합 관리
  - ✅ 복잡한 API 참조 시스템 제거로 단순화

### 4. 성능 최적화
- **이미지 최적화**: Cloudinary 또는 Google Cloud Storage 사용
- **캐싱 전략**: CDN 캐싱, API 응답 캐싱
- **번들 최적화**: Vite 빌드 최적화

### 5. 모니터링 및 로깅
- **로깅**: Google Cloud Logging
- **모니터링**: Google Cloud Monitoring
- **에러 추적**: 사용자 경험 개선을 위한 에러 수집

### 6. 프로젝트 타입 구분 시스템 ✅
- **목적**: 실제 개발 프로젝트와 업무/학습 경험을 시각적으로 구분
- **구현 내용**:
  - ✅ Project 인터페이스에 `type: 'project' | 'experience'` 필드 추가
  - ✅ 기존 GitHub 프로젝트들을 'project' 타입으로 설정
  - ✅ 업무/학습 경험들을 'experience' 타입으로 설정
  - ✅ ProjectCard 컴포넌트에 타입별 스타일링 적용
  - ✅ SVG 아이콘들을 `components/icons/ProjectIcons.tsx`로 분리하여 코드 정리
  - ✅ 디자인 통일성 개선:
    - 모든 프로젝트 카드 배경을 흰색으로 통일
    - 프로젝트/경험 모두 배지 표시
    - 프로젝트: 파란색 배지, 경험: 오렌지색 배지
    - 기술 스택 태그는 프로젝트 타입에 따라 색상 구분
  - ✅ 필터링 기능: 전체/프로젝트/경험 필터
- **사용자 경험 개선**:
  - 시각적 구분으로 프로젝트 유형을 즉시 파악 가능
  - 프로젝트는 파란색, 경험은 오렌지색으로 구분
  - 경험은 외부 링크가 없어도 명확한 표시
  - 회사 보안 정책 등으로 인한 업무 경험도 포트폴리오에 포함 가능

### 7. Feature-Based Architecture 재구성 ✅ (2024-07-21)
- **목적**: 모듈화되고 확장 가능한 프로젝트 구조로 변경
- **구현 내용**:
  - ✅ `src/features/` 디렉토리 구조로 변경
    - `projects/`: 프로젝트 관련 컴포넌트, 상수, 타입
    - `chatbot/`: 챗봇 관련 컴포넌트, 서비스, 타입  
    - `layout/`: 레이아웃 관련 컴포넌트 (App, Header)
  - ✅ `src/shared/` 디렉토리로 공통 코드 분리
    - `services/`: geminiService, githubService, prompts
    - `config/`: app.config.ts
    - `components/`: ProjectIcons
    - `types/`: 공통 타입 정의
  - ✅ 진입점을 `src/main.tsx`로 이동
  - ✅ `index.html`에서 진입점 경로 수정
  - ✅ 모든 import 경로를 새로운 구조에 맞게 수정
  - ✅ 순환 참조 문제 해결 (appConfig 직접 참조 제거)
  - ✅ Barrel exports를 통한 깔끔한 import 구조
- **개선 효과**:
  - 모듈화: 각 기능이 독립적인 폴더에 구성
  - 확장성: 새로운 기능 추가 시 해당 폴더만 수정
  - 유지보수성: 관련 코드가 한 곳에 모여있음
  - 타입 안전성: 각 feature별로 타입 정의
  - 재사용성: shared 폴더를 통한 공통 코드 관리
  - 명확한 구조: Feature-Based Architecture 적용

### 8. 히스토리 패널 기능 구현 ✅ (2024-12-19)
- **목적**: 프로젝트와 경험들을 시간순으로 시각화하여 경력 발전 과정을 한눈에 파악
- **구현 내용**:
  - ✅ Project 인터페이스에 `startDate`, `endDate` 필드 추가 (YYYY-MM 형식)
  - ✅ 모든 프로젝트와 경험에 날짜 정보 추가
  - ✅ HistoryPanel 컴포넌트 생성:
    - 사이드 패널 형태로 우측에서 슬라이드 인/아웃
    - 수직 타임라인으로 시간순 정렬
    - 프로젝트는 왼쪽, 경험은 오른쪽에 배치하여 겹침 방지
    - 프로젝트: 파란색 테마, 경험: 오렌지색 테마
    - 마우스 오버 시 하이라이트 효과
    - 반응형 디자인 및 스크롤 가능한 패널
  - ✅ PanelToggle 컴포넌트 생성:
    - 우측 하단에 고정된 토글 버튼
    - 히스토리 차트 아이콘 사용
    - 상태에 따른 색상 변경
  - ✅ ProjectCard 컴포넌트 개선:
    - 마우스 오버 이벤트 추가
    - 히스토리 패널과 연동된 하이라이트 기능
  - ✅ PortfolioSection 컴포넌트 통합:
    - 히스토리 패널 상태 관리
    - 하이라이트 아이템 ID 관리
    - 컴포넌트 간 이벤트 연결
- **사용자 경험 개선**:
  - 프로젝트 카드에 마우스 오버 시 타임라인에서 해당 아이템 하이라이트
  - 타임라인 아이템에 마우스 오버 시 프로젝트 카드 하이라이트
  - 직관적인 수직 타임라인으로 경력 발전 과정 파악
  - 프로젝트와 경험의 명확한 구분 (왼쪽/오른쪽 배치)
  - 진행 중인 프로젝트 표시 (endDate가 undefined인 경우)
  - 사이드 패널로 메인 콘텐츠 방해 없이 히스토리 확인 가능

## 🔄 다음 단계

### Phase 1: 배포 준비
- [x] Dockerfile 생성
- [x] nginx.conf 설정 파일 생성
- [x] .dockerignore 파일 생성
- [x] GitHub Actions CI/CD 파이프라인 구성
- [x] 배포 스크립트 생성
- [x] 배포 가이드 문서 작성
- [ ] Google Cloud 프로젝트 설정 (실행 필요)
- [ ] Secret Manager 설정 (실행 필요)

### Phase 2: 데이터 소스 개선
- [x] GitHub API 연동 서비스 생성 (services/githubService.ts)
- [x] 하이브리드 캐싱 시스템 구현 (services/projectService.ts)
- [x] constants.ts 간소화 (README 제거)
- [x] Vite 환경 변수 타입 정의 (vite-env.d.ts)
- [x] 인터랙티브 챗봇 초기화 구현
- [x] 프로젝트 타입 구분 시스템 구현
- [x] Feature-Based Architecture 재구성
- [x] 히스토리 패널 기능 구현
- [ ] 이미지 최적화

### Phase 3: 프로덕션 최적화
- [ ] 성능 모니터링 설정
- [ ] 에러 처리 개선
- [ ] 사용자 분석 도구 추가

## 📊 기술적 고려사항

### 보안
- API 키 노출 방지
- CORS 설정
- Rate limiting 적용
- **AI 챗봇 프로젝트 제한**: constants.ts에 정의된 프로젝트만 접근 가능
- **시스템 인스트럭션 제한**: 허용된 프로젝트 목록 외 질문 시 'I_CANNOT_ANSWER' 응답
- **컨텍스트 제한**: 오직 정의된 프로젝트 정보만 AI에게 제공

### 확장성
- 서버리스 아키텍처 활용
- 캐싱 전략 수립
- 데이터베이스 필요성 검토

### 사용자 경험
- 로딩 상태 개선
- 에러 메시지 친화적 표현
- 모바일 최적화
- **인터랙티브 초기화**: 프로젝트 선택 버튼으로 사용자 경험 향상
- **단계별 가이드**: 초기 메시지에서 사용법 안내
- **프로젝트 타입 구분**: 시각적 구분으로 사용자 이해도 향상
- **히스토리 패널**: 시간순 시각화로 경력 발전 과정 파악

## 🗓 타임라인
- **Week 1**: 배포 환경 구축 ✅ (완료)
- **Week 2**: GitHub API 연동 🔄 (진행 중)
- **Week 3**: 프로덕션 최적화
- **Week 4**: 모니터링 및 테스트

## 📁 생성된 파일들
- `Dockerfile`: 멀티스테이지 빌드를 위한 Docker 설정
- `nginx.conf`: Cloud Run용 nginx 설정
- `.dockerignore`: Docker 빌드 최적화
- `services/githubService.ts`: GitHub API 연동 서비스
- `services/projectService.ts`: GitHub API 캐싱 시스템
- `vite-env.d.ts`: Vite 환경 변수 타입 정의
- `scripts/deploy.sh`: 수동 배포 스크립트
- `.github/workflows/deploy.yml`: GitHub Actions CI/CD
- `env.example`: 환경 변수 예시
- `docs/deployment-guide.md`: 상세 배포 가이드

## 🆕 최신 업데이트 (2024년 12월)

### 프로젝트 맥락 유지 시스템 구현 ✅
**문제**: 사용자가 특정 프로젝트를 선택했는데, 챗봇이 다른 프로젝트의 GitHub 레포지토리를 참조하여 404 에러 발생

**해결책**:
1. **GitHub 서비스 개선**:
   - `getProjectInfo()` 함수 추가: 특정 프로젝트의 GitHub 정보만 가져오기
   - 프로젝트 제목과 레포지토리명 매핑 시스템 구현
   - 404 에러 조용히 처리하여 콘솔 오류 감소

2. **Gemini 서비스 개선**:
   - `getChatbotResponse()` 함수에 `selectedProject` 매개변수 추가
   - 선택된 프로젝트가 있으면 해당 프로젝트의 `docs/portfolio.md`만 참조
   - 선택된 프로젝트가 없으면 전체 프로젝트 컨텍스트 사용

3. **Chatbot 컴포넌트 개선**:
   - `selectedProject` 상태 추가로 현재 선택된 프로젝트 추적
   - 프로젝트 선택 시 해당 프로젝트의 맥락 설정
   - 헤더에 "현재 프로젝트: [프로젝트명]" 표시
   - 모든 후속 질문에서 선택된 프로젝트의 맥락 유지

**결과**: 
- 사용자가 "PYQT5 파일 태거" 선택 시 `PYQT5_FileTagger` 레포지토리의 `docs/portfolio.md`만 참조
- 404 에러 대폭 감소
- 더 정확하고 맥락에 맞는 AI 응답 제공

### 프로젝트 타입 구분 시스템 구현 ✅
**목적**: 실제 개발 프로젝트와 업무/학습 경험을 시각적으로 구분하여 사용자 경험 향상

**구현 내용**:
1. **타입 시스템 개선**:
   - `Project` 인터페이스에 `type: 'project' | 'experience'` 필드 추가
   - 기존 GitHub 프로젝트들을 'project' 타입으로 설정
   - 업무/학습 경험들을 'experience' 타입으로 설정

2. **코드 구조 개선**:
   - 하드코딩된 SVG 아이콘들을 `components/icons/ProjectIcons.tsx`로 분리
   - 재사용 가능한 아이콘 컴포넌트로 정리
   - 코드 가독성 및 유지보수성 향상

3. **UI/UX 개선**:
   - **프로젝트**: 파란색 배지와 테마
   - **경험**: 오렌지색 배지와 테마
   - 모든 프로젝트 카드 배경을 흰색으로 통일하여 디자인 일관성 확보
   - 프로젝트/경험 모두 배지 표시로 명확한 구분
   - 기술 스택 태그는 프로젝트 타입에 따라 색상 구분

4. **필터링 기능**:
   - 전체/프로젝트/경험 필터 버튼
   - 각 타입별 프로젝트 개수 표시
   - 필터링된 결과가 없을 때 친화적인 메시지 표시

**사용자 경험 개선**:
- 시각적 구분으로 프로젝트 유형을 즉시 파악 가능
- 경험은 외부 링크가 없어도 명확한 표시
- 링크가 없는 경우 "경험" 텍스트로 표시
- 회사 보안 정책 등으로 인한 업무 경험도 포트폴리오에 포함 가능

**결과**:
- 사용자가 프로젝트 유형을 한눈에 구분 가능
- 프로젝트와 경험의 명확한 시각적 차별화
- 코드 구조 개선으로 유지보수성 향상
- 향후 경험 추가 시 일관된 디자인 적용 가능

### 히스토리 패널 기능 구현 ✅ (2024-12-19)
**목적**: 프로젝트와 경험들을 시간순으로 시각화하여 경력 발전 과정을 한눈에 파악

**구현 내용**:
1. **데이터 구조 개선**:
   - `Project` 인터페이스에 `startDate`, `endDate` 필드 추가 (YYYY-MM 형식)
   - 모든 프로젝트와 경험에 실제 날짜 정보 추가
   - 진행 중인 프로젝트는 `endDate`를 `undefined`로 설정

2. **히스토리 패널 컴포넌트**:
   - **두 줄 타임라인**: 프로젝트와 경험을 별도 라인으로 구분
   - **시각적 구분**: 프로젝트는 파란색, 경험은 오렌지색 테마
   - **시간순 정렬**: 시작일 기준으로 자동 정렬
   - **반응형 디자인**: 모달 형태로 전체 화면 활용
   - **인터랙티브 요소**: 마우스 오버 시 하이라이트 효과

3. **패널 토글 시스템**:
   - 우측 상단에 고정된 토글 버튼
   - 히스토리 차트 아이콘으로 직관적 표시
   - 상태에 따른 색상 및 스타일 변경

4. **연동 기능**:
   - 프로젝트 카드 마우스 오버 시 타임라인 아이템 하이라이트
   - 타임라인 아이템 마우스 오버 시 프로젝트 카드 하이라이트
   - 양방향 인터랙션으로 사용자 경험 향상

**사용자 경험 개선**:
- **직관적 시각화**: 시간순 배치로 경력 발전 과정 파악
- **명확한 구분**: 프로젝트와 경험의 시각적 차별화
- **인터랙티브 요소**: 마우스 오버로 관련 아이템 하이라이트
- **진행 중 표시**: 현재 진행 중인 프로젝트 명확히 표시
- **반응형 디자인**: 다양한 화면 크기에서 최적화된 표시

**기술적 특징**:
- **타입 안전성**: TypeScript로 완전한 타입 정의
- **성능 최적화**: 불필요한 리렌더링 방지
- **접근성**: 키보드 네비게이션 및 스크린 리더 지원
- **확장성**: 새로운 프로젝트/경험 추가 시 자동 반영

**결과**:
- 사용자가 경력 발전 과정을 시각적으로 파악 가능
- 프로젝트와 경험의 시간적 관계 명확히 표시
- 인터랙티브한 사용자 경험으로 포트폴리오 탐색 향상
- 모바일 및 데스크톱에서 일관된 사용자 경험 제공

### 환경 변수 설정 가이드 추가 ✅
- `.env.local` 파일 생성 가이드 제공
- `VITE_GEMINI_API_KEY` 설정 방법 안내
- Google AI Studio에서 API 키 발급 방법 안내

### 🚀 향후 추가 기능 계획 

#### 1. 프로젝트 상세 모달 기능 📋
**목적**: 각 프로젝트 카드를 클릭했을 때 모달을 통해 세부 정보를 확인할 수 있는 기능

**구현 계획**:
- **모달 컴포넌트**: `components/ProjectModal.tsx` 생성
- **상세 정보 표시**:
  - 프로젝트 제목, 설명, 기술 스택
  - GitHub 링크, 라이브 데모 링크
  - README 내용 (GitHub API에서 가져온)
  - 프로젝트 스크린샷 또는 이미지
  - 개발 기간, 팀 구성 등 메타데이터
- **인터랙션**:
  - 프로젝트 카드 클릭 시 모달 열기
  - ESC 키 또는 배경 클릭으로 모달 닫기
  - 모달 내에서 AI 챗봇과 해당 프로젝트에 대해 대화 가능
- **UI/UX**:
  - 반응형 디자인 (모바일/데스크톱)
  - 부드러운 애니메이션 효과
  - 스크롤 가능한 콘텐츠 영역

#### 2. 타임라인 뷰 기능 📅
**목적**: 프로젝트와 경험들을 시간순으로 한눈에 파악할 수 있는 타임라인 뷰

**구현 계획**:
- **타임라인 컴포넌트**: `components/TimelineView.tsx` 생성
- **데이터 구조 개선**:
  - `Project` 인터페이스에 `startDate`, `endDate` 필드 추가
  - `constants.ts`의 프로젝트 데이터에 날짜 정보 추가
- **타임라인 표시**:
  - 수직 타임라인 형태로 시간순 정렬
  - 프로젝트와 경험을 다른 색상/아이콘으로 구분
  - 각 항목에 제목, 간단한 설명, 기술 스택 표시
- **인터랙션**:
  - 타임라인 항목 클릭 시 해당 프로젝트 상세 모달 열기
  - 연도별 필터링 기능
  - 프로젝트/경험 타입별 필터링
- **UI/UX**:
  - 시각적으로 매력적인 타임라인 디자인
  - 호버 효과 및 클릭 애니메이션
  - 반응형 레이아웃

**기술적 고려사항**:
- **성능**: 많은 프로젝트가 있을 때의 렌더링 최적화
- **접근성**: 키보드 네비게이션 및 스크린 리더 지원
- **데이터 관리**: 날짜 정보의 일관성 및 유효성 검증
- **확장성**: 향후 더 많은 프로젝트 추가 시 타임라인 확장

**사용자 경험 개선 효과**:
- 프로젝트의 시간적 흐름을 직관적으로 파악 가능
- 경력 발전 과정을 시각적으로 표현
- 특정 시기의 프로젝트를 빠르게 찾기 가능
- 포트폴리오의 스토리텔링 효과 향상

---

# AI Conversation Log

## 히스토리 패널 구현 (2025-07-21)

### 요구사항
- 포트폴리오 사이트에 프로젝트와 경험의 시작/종료 날짜를 시각적으로 표현하는 히스토리 패널 구현
- 토글 가능한 사이드 패널 (모달 아님)
- 수직 타임라인으로 프로젝트와 경험을 구분하여 표시
- 프로젝트/경험 카드와 타임라인 간 양방향 하이라이트 기능
- 캔들스틱 형태의 시각적 표현

### 구현 과정

#### 1. 초기 구조 설계
- `src/features/projects/components/HistoryPanel.tsx` 생성
- `src/features/projects/components/PanelToggle.tsx` 생성
- `src/features/projects/types.ts`에 날짜 필드 추가
- 프로젝트 데이터에 `startDate`, `endDate` 필드 추가

#### 2. 날짜 유틸 함수 구현
- `src/shared/utils/dateUtils.ts` 생성
- `parseDate()`: YYYY-MM 형식 문자열을 Date 객체로 변환
- `formatDateToYYYYMM()`: Date 객체를 YYYY.MM 형식으로 포맷
- `getTimelinePosition()`: 날짜를 타임라인 위치 퍼센트로 변환
- `generateTimelineDates()`: 타임라인에 표시할 날짜들 생성
- `getProjectDateRange()`: 프로젝트 배열에서 최소/최대 날짜 추출

#### 3. 타임라인 레이아웃 개선
- **초기**: 모달 형태의 수평 타임라인
- **1차 수정**: 사이드 패널로 변경, 수직 타임라인 구현
- **2차 수정**: 프로젝트와 경험을 좌우로 분리
- **3차 수정**: 캔들스틱 형태로 변경 (상단/하단 심지 + 몸통)
- **4차 수정**: 단순한 바 형태로 단순화

#### 4. 날짜 순서 및 범위 조정
- **초기**: 과거순 (상단이 과거, 하단이 최신)
- **수정**: 최신순 (상단이 최신, 하단이 과거)
- **범위 조정**: 가장 최초 프로젝트보다 1달 전부터, 오늘 기준 1달 후까지

#### 5. 시각적 개선
- **라벨 분리**: 캔들스틱과 라벨을 별도 영역에 배치
- **라벨 제거**: 최종적으로 라벨 없이 깔끔한 바만 표시
- **색상 구분**: 프로젝트(파란색) vs 경험(오렌지색)
- **하이라이트 효과**: 마우스 오버 시 색상 강화 및 스케일 효과

#### 6. 데이터 통합 및 처리
- GitHub 프로젝트, 로컬 프로젝트, 경험 데이터 통합
- 다양한 날짜 형식 처리 (YYYY-MM, YYYY-MM-DD)
- 진행 중인 프로젝트 처리 (endDate가 undefined인 경우)

### 최종 구현 결과

#### 타임라인 구조
- **중앙 기준선**: 수직 타임라인 축
- **날짜 레이블**: 3개월 간격으로 YYYY.MM 형식 표시
- **프로젝트 바**: 왼쪽에 파란색 수직 바
- **경험 바**: 오른쪽에 오렌지색 수직 바
- **순서**: 상단이 최신, 하단이 과거

#### 주요 기능
- **토글 패널**: 우측 사이드에서 슬라이드 인/아웃
- **양방향 하이라이트**: 바 ↔ 프로젝트 카드
- **스크롤 가능**: 긴 타임라인을 스크롤로 탐색
- **반응형 디자인**: 적절한 크기와 간격

#### 기술적 특징
- **TypeScript**: 타입 안전성 보장
- **Tailwind CSS**: 일관된 스타일링
- **React Hooks**: 상태 관리 및 이벤트 처리
- **유틸 함수**: 재사용 가능한 날짜 처리 로직

### 해결된 문제들
1. **날짜 계산 오류**: `startPos > endPos` 문제 해결
2. **바 높이 계산**: 절댓값 사용으로 올바른 기간 표시
3. **타임라인 범위**: 프로젝트 기간과 일치하도록 조정
4. **데이터 통합**: 여러 소스의 프로젝트 데이터 통합 처리
5. **시각적 일관성**: 모든 요소의 일관된 스타일링

### 파일 구조
```
src/
├── features/projects/
│   ├── components/
│   │   ├── HistoryPanel.tsx      # 메인 히스토리 패널
│   │   ├── PanelToggle.tsx       # 토글 버튼
│   │   └── PortfolioSection.tsx  # 통합된 포트폴리오 섹션
│   ├── constants/
│   │   ├── projects.ts           # GitHub 프로젝트
│   │   ├── localProjects.ts      # 로컬 프로젝트
│   │   └── experiences.ts        # 경험 데이터
│   └── types.ts                  # 타입 정의
└── shared/utils/
    └── dateUtils.ts              # 날짜 유틸 함수
```

### 다음 단계
- 사용자 피드백 반영
- 성능 최적화
- 추가 기능 구현 (필터링, 검색 등)