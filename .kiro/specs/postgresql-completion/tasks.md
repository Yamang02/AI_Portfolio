# PostgreSQL 구현 완성 작업 계획

## 1. JPA 엔티티 구현

- [x] 1.1 Project 엔티티 구현
  - JPA 어노테이션을 사용한 Project 엔티티 클래스 생성
  - 기존 도메인 모델과 매핑되는 테이블 스키마 정의
  - 연관관계 매핑 (기술스택, 팀원 등)
  - 데이터 검증 어노테이션 적용 (@NotNull, @Size 등)
  - _요구사항: 1.1, 1.2, 1.3_

- [x] 1.2 Experience 엔티티 구현
  - Experience 도메인 모델에 대응하는 JPA 엔티티 생성
  - 날짜 필드 매핑 및 검증 로직 구현
  - 회사 정보, 역할, 기술스택 필드 매핑
  - _요구사항: 1.1, 1.2, 1.3_

- [x] 1.3 Education 엔티티 구현
  - Education 도메인 모델 JPA 엔티티 매핑
  - 교육기관, 전공, 학위 정보 필드 정의
  - 기간 정보 및 상태 필드 매핑
  - _요구사항: 1.1, 1.2, 1.3_

- [x] 1.4 Certification 엔티티 구현
  - Certification 도메인 모델 JPA 엔티티 생성
  - 자격증 정보, 발급기관, 취득일 필드 매핑
  - 유효기간 및 상태 관리 로직 구현
  - _요구사항: 1.1, 1.2, 1.3_

## 2. Repository 구현체 완성

- [x] 2.1 PostgresPortfolioRepository 메서드 구현
  - findAllProjects() 실제 PostgreSQL 쿼리로 구현
  - 복잡한 검색 메서드들 (타입별, 소스별, 팀별) JPA 쿼리로 변환
  - 캐시 로직과 데이터베이스 조회 로직 통합
  - 에러 처리 및 로깅 강화
  - _요구사항: 2.1, 2.2, 2.3_

- [x] 2.2 Experience/Education/Certification Repository 메서드 구현
  - 각 도메인별 조회 메서드를 실제 JPA 쿼리로 구현
  - ID 기반 조회, 전체 조회 메서드 완성
  - 정렬 및 필터링 로직 구현
  - _요구사항: 2.1, 2.2, 2.3_

- [x] 2.3 JPA Repository 인터페이스 생성
  - Spring Data JPA Repository 인터페이스 정의
  - 커스텀 쿼리 메서드 구현 (@Query 어노테이션 활용)
  - 페이징 및 정렬 지원 추가
  - _요구사항: 2.1, 2.2_

## 3. 데이터베이스 연결 및 검증

- [x] 3.1 PostgreSQL 연결 설정 확인
  - application.yml의 데이터베이스 연결 정보 업데이트 (dev_user/dev_password)
  - Docker Compose PostgreSQL 서비스 실행 및 연결 테스트
  - 기존 스키마와 데이터 로딩 확인
  - _요구사항: 3.1, 3.2_

- [x] 3.2 데이터베이스 스키마 검증
  - 기존 database/schema.sql과 도메인 모델 간 매핑 확인
  - 필드명 불일치 사항 식별 및 매퍼에서 처리 방안 수립
  - 테이블 구조와 JPA 엔티티 간 호환성 검증
  - _요구사항: 3.1, 3.2, 3.3_

- [x] 3.3 데이터 로딩 검증
  - Docker 컨테이너 시작 시 insert-data.sql 자동 실행 확인
  - 삽입된 데이터의 무결성 및 완전성 검증
  - 기존 JSON 데이터와 PostgreSQL 데이터 일치성 확인
  - _요구사항: 3.2, 3.4_

## 4. 통합 테스트 및 검증

- [ ] 4.1 Repository 단위 테스트 구현
  - 각 Repository 메서드별 단위 테스트 작성
  - @DataJpaTest를 활용한 JPA 레이어 테스트 구현
  - 테스트 데이터 셋업 및 정리 로직 구현
  - _요구사항: 2.4, 4.1, 4.2_

- [ ] 4.2 API 통합 테스트 구현
  - 기존 REST API 엔드포인트 동작 검증 테스트 작성
  - PostgreSQL 연동 후 API 응답 형식 일치성 확인
  - 성능 테스트 (응답 시간 측정 및 비교)
  - _요구사항: 4.1, 4.2, 4.3_

- [ ] 4.3 Docker Compose 환경 통합 테스트
  - 전체 스택 (Frontend + Backend + PostgreSQL) 통합 테스트
  - 프론트엔드에서 실제 데이터 조회 및 표시 확인
  - 데이터베이스 연결 안정성 및 에러 처리 테스트
  - _요구사항: 4.1, 4.2, 5.4_

## 5. 성능 최적화 및 안정성 강화

- [ ] 5.1 데이터베이스 연결 설정 최적화
  - HikariCP 연결 풀 설정 튜닝
  - 연결 타임아웃 및 최대 연결 수 설정
  - 데이터베이스 헬스체크 구현
  - _요구사항: 5.1, 5.4_

- [ ] 5.2 쿼리 성능 최적화
  - 자주 사용되는 쿼리에 대한 인덱스 생성
  - N+1 쿼리 문제 해결 (fetch join 활용)
  - 쿼리 실행 계획 분석 및 최적화
  - _요구사항: 5.2, 5.3_

- [ ] 5.3 에러 처리 및 로깅 강화
  - 데이터베이스 연결 실패 시 적절한 에러 처리 구현
  - 쿼리 실행 오류에 대한 상세 로깅 추가
  - 트랜잭션 롤백 및 복구 메커니즘 구현
  - _요구사항: 5.4, 2.4_

## 6. 아키텍처 구조 정리

- [x] 6.1 중복 클래스 제거
  - application/service/ 디렉토리의 중복 클래스들 삭제
  - ChatApplicationService, AIService, PromptService 등 중복 제거
  - Bean 충돌 문제 해결

- [x] 6.2 올바른 아키텍처 구조 복원
  - Portfolio 관련 서비스들을 application/portfolio/ 디렉토리로 이동
  - Chatbot 관련 서비스들은 application/chatbot/ 디렉토리에 유지
  - 아키텍처 문서와 일치하는 구조로 정리

- [x] 6.3 import 경로 수정
  - 이동된 클래스들의 package 선언 수정
  - 컴파일 오류 해결 및 검증

## 7. 배포 준비 (로컬 환경)

- [x] 7.1 Docker Compose 환경 검증
  - 기존 PostgreSQL 서비스 설정 확인 및 테스트
  - pgAdmin 접속 및 데이터 확인
  - 백엔드 서비스와 PostgreSQL 연결 테스트
  - _요구사항: 5.1_

- [x] 7.2 개발 환경 문서화
  - PostgreSQL 설정 및 실행 가이드 작성
  - 데이터 마이그레이션 실행 방법 문서화
  - 트러블슈팅 가이드 및 FAQ 작성
  - _요구사항: 전체_

- [x] 7.3 최종 검증 및 정리
  - 전체 기능 동작 확인 체크리스트 실행
  - 기존 JSON 파일 기반 코드 정리 (주석 처리 또는 제거)
  - 코드 리뷰 및 리팩토링
  - _요구사항: 전체_

## 완성 기준

### 성공 조건
1. ✅ 모든 기존 API가 PostgreSQL 기반으로 정상 동작
2. ✅ 프론트엔드에서 포트폴리오 데이터 정상 표시
3. ✅ Docker Compose로 전체 스택 실행 가능
4. ✅ 데이터 마이그레이션 100% 완료
5. ✅ 단위/통합 테스트 모두 통과

### 예상 소요 시간 (현실적)
- **1-2일**: JPA 엔티티 및 Repository 구현 (보일러플레이트 코드)
- **0.5일**: 데이터베이스 연결 및 스키마 검증
- **1일**: 테스트 및 검증
- **0.5일**: Docker 환경 통합 테스트 및 최종 확인
- **총 3-4일** 예상

이 정도 범위로 PostgreSQL 완성을 진행하면, AI 서비스 개발을 위한 안정적인 기반이 마련됩니다!