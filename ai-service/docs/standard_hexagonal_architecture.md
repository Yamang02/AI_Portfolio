# í‘œì¤€ í—¥ì‚¬ê³ ë„ ì•„í‚¤í…ì²˜ (í¬íŠ¸ì™€ ì–´ëŒ‘í„° íŒ¨í„´) í‘œì¤€ ê°€ì´ë“œ

## ğŸ¯ **í—¥ì‚¬ê³ ë„ ì•„í‚¤í…ì²˜ í•µì‹¬ ì›ì¹™**

### **1. ì˜ì¡´ì„± ë°©í–¥**
```
ì™¸ë¶€ ì‹œìŠ¤í…œ â†’ ì–´ëŒ‘í„° â†’ í¬íŠ¸ â†’ ì• í”Œë¦¬ì¼€ì´ì…˜ â†’ í¬íŠ¸ â†’ ì–´ëŒ‘í„° â†’ ì™¸ë¶€ ì‹œìŠ¤í…œ
```

### **2. í•µì‹¬ ê³„ì¸µ êµ¬ì¡°**
```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì™¸ë¶€ ì‹œìŠ¤í…œ (External Systems)            â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    ì–´ëŒ‘í„° (Adapters)                        â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Primary/       â”‚              â”‚  Secondary/     â”‚      â”‚
â”‚  â”‚  Driving        â”‚              â”‚  Driven          â”‚      â”‚
â”‚  â”‚  Adapters       â”‚              â”‚  Adapters       â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                    í¬íŠ¸ (Ports)                            â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”              â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”      â”‚
â”‚  â”‚  Inbound Ports  â”‚              â”‚  Outbound Ports â”‚      â”‚
â”‚  â”‚  (ì…ë ¥ í¬íŠ¸)     â”‚              â”‚  (ì¶œë ¥ í¬íŠ¸)     â”‚      â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜              â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜      â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                              â†•
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚                ì• í”Œë¦¬ì¼€ì´ì…˜ (Application)                   â”‚
â”‚  â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”    â”‚
â”‚  â”‚              ë„ë©”ì¸ ë¡œì§ (Domain Logic)             â”‚    â”‚
â”‚  â”‚              ìœ ìŠ¤ì¼€ì´ìŠ¤ (Use Cases)                 â”‚    â”‚
â”‚  â”‚              ì„œë¹„ìŠ¤ (Services)                      â”‚    â”‚
â”‚  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

## ğŸ“ **í‘œì¤€ ë””ë ‰í† ë¦¬ êµ¬ì¡°**

### **1. ì „ì²´ í”„ë¡œì íŠ¸ êµ¬ì¡°**
```
src/
â”œâ”€â”€ core/                           # í•µì‹¬ ë„ë©”ì¸ (ì˜ì¡´ì„± ì—†ìŒ)
â”‚   â”œâ”€â”€ domain/                     # ë„ë©”ì¸ ëª¨ë¸
â”‚   â”‚   â”œâ”€â”€ entities/               # ë„ë©”ì¸ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ value_objects/          # ê°’ ê°ì²´
â”‚   â”‚   â””â”€â”€ services/               # ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”‚   â””â”€â”€ ports/                      # í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
â”‚       â”œâ”€â”€ inbound/                # ì…ë ¥ í¬íŠ¸ (Primary/Driving)
â”‚       â””â”€â”€ outbound/               # ì¶œë ¥ í¬íŠ¸ (Secondary/Driven)
â”œâ”€â”€ application/                    # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ services/                   # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ use_cases/                  # ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚   â”œâ”€â”€ dto/                        # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â””â”€â”€ commands/                   # ëª…ë ¹ ê°ì²´
â””â”€â”€ adapters/                       # ì–´ëŒ‘í„° (ì¸í”„ë¼)
    â”œâ”€â”€ inbound/                    # ì…ë ¥ ì–´ëŒ‘í„° (Primary/Driving)
    â”‚   â”œâ”€â”€ web/                    # ì›¹ ì–´ëŒ‘í„° (REST API, GraphQL ë“±)
    â”‚   â”œâ”€â”€ cli/                    # CLI ì–´ëŒ‘í„°
    â”‚   â””â”€â”€ messaging/              # ë©”ì‹œì§• ì–´ëŒ‘í„°
    â””â”€â”€ outbound/                   # ì¶œë ¥ ì–´ëŒ‘í„° (Secondary/Driven)
        â”œâ”€â”€ databases/              # ë°ì´í„°ë² ì´ìŠ¤ ì–´ëŒ‘í„°
        â”œâ”€â”€ external_apis/          # ì™¸ë¶€ API ì–´ëŒ‘í„°
        â”œâ”€â”€ file_systems/           # íŒŒì¼ ì‹œìŠ¤í…œ ì–´ëŒ‘í„°
        â””â”€â”€ messaging/              # ë©”ì‹œì§• ì–´ëŒ‘í„°
```

### **2. Core Layer (í•µì‹¬ ë„ë©”ì¸)**
```
core/
â”œâ”€â”€ domain/                         # ë„ë©”ì¸ ëª¨ë¸
â”‚   â”œâ”€â”€ entities/                   # ë„ë©”ì¸ ì—”í‹°í‹°
â”‚   â”‚   â”œâ”€â”€ user.py
â”‚   â”‚   â”œâ”€â”€ document.py
â”‚   â”‚   â””â”€â”€ conversation.py
â”‚   â”œâ”€â”€ value_objects/              # ê°’ ê°ì²´
â”‚   â”‚   â”œâ”€â”€ email.py
â”‚   â”‚   â”œâ”€â”€ document_id.py
â”‚   â”‚   â””â”€â”€ conversation_id.py
â”‚   â””â”€â”€ services/                   # ë„ë©”ì¸ ì„œë¹„ìŠ¤
â”‚       â””â”€â”€ document_service.py
â””â”€â”€ ports/                          # í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤
    â”œâ”€â”€ inbound/                    # ì…ë ¥ í¬íŠ¸ (Primary/Driving)
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ user_management_port.py
    â”‚   â”œâ”€â”€ document_management_port.py
    â”‚   â””â”€â”€ conversation_port.py
    â””â”€â”€ outbound/                   # ì¶œë ¥ í¬íŠ¸ (Secondary/Driven)
        â”œâ”€â”€ __init__.py
        â”œâ”€â”€ user_repository_port.py
        â”œâ”€â”€ document_repository_port.py
        â”œâ”€â”€ llm_service_port.py
        â””â”€â”€ vector_store_port.py
```

### **3. Application Layer (ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤)**
```
application/
â”œâ”€â”€ services/                       # ì• í”Œë¦¬ì¼€ì´ì…˜ ì„œë¹„ìŠ¤
â”‚   â”œâ”€â”€ user_service.py            # UserManagementPort êµ¬í˜„
â”‚   â”œâ”€â”€ document_service.py        # DocumentManagementPort êµ¬í˜„
â”‚   â””â”€â”€ conversation_service.py    # ConversationPort êµ¬í˜„
â”œâ”€â”€ use_cases/                      # ìœ ìŠ¤ì¼€ì´ìŠ¤
â”‚   â”œâ”€â”€ create_user_use_case.py
â”‚   â”œâ”€â”€ add_document_use_case.py
â”‚   â””â”€â”€ chat_use_case.py
â”œâ”€â”€ dto/                           # ë°ì´í„° ì „ì†¡ ê°ì²´
â”‚   â”œâ”€â”€ user_dto.py
â”‚   â”œâ”€â”€ document_dto.py
â”‚   â””â”€â”€ conversation_dto.py
â””â”€â”€ commands/                      # ëª…ë ¹ ê°ì²´
    â”œâ”€â”€ create_user_command.py
    â”œâ”€â”€ add_document_command.py
    â””â”€â”€ send_message_command.py
```

### **4. Adapters Layer (ì–´ëŒ‘í„°)**
```
adapters/
â”œâ”€â”€ inbound/                       # ì…ë ¥ ì–´ëŒ‘í„° (Primary/Driving)
â”‚   â”œâ”€â”€ web/                       # ì›¹ ì–´ëŒ‘í„°
â”‚   â”‚   â”œâ”€â”€ __init__.py
â”‚   â”‚   â”œâ”€â”€ fastapi_router.py      # FastAPI ë¼ìš°í„°
â”‚   â”‚   â”œâ”€â”€ controllers/           # ì»¨íŠ¸ë¡¤ëŸ¬
â”‚   â”‚   â”‚   â”œâ”€â”€ user_controller.py
â”‚   â”‚   â”‚   â”œâ”€â”€ document_controller.py
â”‚   â”‚   â”‚   â””â”€â”€ conversation_controller.py
â”‚   â”‚   â””â”€â”€ dependencies.py        # ì˜ì¡´ì„± ì£¼ì…
â”‚   â”œâ”€â”€ cli/                       # CLI ì–´ëŒ‘í„°
â”‚   â”‚   â””â”€â”€ cli_commands.py
â”‚   â””â”€â”€ messaging/                 # ë©”ì‹œì§• ì–´ëŒ‘í„°
â”‚       â””â”€â”€ kafka_consumer.py
â””â”€â”€ outbound/                      # ì¶œë ¥ ì–´ëŒ‘í„° (Secondary/Driven)
    â”œâ”€â”€ databases/                 # ë°ì´í„°ë² ì´ìŠ¤ ì–´ëŒ‘í„°
    â”‚   â”œâ”€â”€ __init__.py
    â”‚   â”œâ”€â”€ postgresql/            # PostgreSQL ì–´ëŒ‘í„°
    â”‚   â”‚   â”œâ”€â”€ user_repository.py
    â”‚   â”‚   â”œâ”€â”€ document_repository.py
    â”‚   â”‚   â””â”€â”€ conversation_repository.py
    â”‚   â”œâ”€â”€ mongodb/               # MongoDB ì–´ëŒ‘í„°
    â”‚   â””â”€â”€ redis/                 # Redis ì–´ëŒ‘í„°
    â”œâ”€â”€ external_apis/             # ì™¸ë¶€ API ì–´ëŒ‘í„°
    â”‚   â”œâ”€â”€ openai_adapter.py      # OpenAI API ì–´ëŒ‘í„°
    â”‚   â”œâ”€â”€ anthropic_adapter.py   # Anthropic API ì–´ëŒ‘í„°
    â”‚   â””â”€â”€ huggingface_adapter.py # HuggingFace API ì–´ëŒ‘í„°
    â”œâ”€â”€ file_systems/              # íŒŒì¼ ì‹œìŠ¤í…œ ì–´ëŒ‘í„°
    â”‚   â”œâ”€â”€ local_file_system.py
    â”‚   â”œâ”€â”€ s3_adapter.py
    â”‚   â””â”€â”€ google_drive_adapter.py
    â””â”€â”€ messaging/                 # ë©”ì‹œì§• ì–´ëŒ‘í„°
        â””â”€â”€ kafka_producer.py
```

## ğŸ”„ **í‘œì¤€ í†µì‹  íë¦„**

### **1. ì‚¬ìš©ì ìƒì„± íë¦„**
```
HTTP POST /users â†’ Web Controller â†’ UserManagementPort â†’ UserService â†’ UserRepositoryPort â†’ PostgreSQLAdapter
```

### **2. ë¬¸ì„œ ì¶”ê°€ íë¦„**
```
HTTP POST /documents â†’ Web Controller â†’ DocumentManagementPort â†’ DocumentService â†’ DocumentRepositoryPort â†’ PostgreSQLAdapter
                                                                                â†“
                                                                        VectorStorePort â†’ PineconeAdapter
```

### **3. ì±„íŒ… íë¦„**
```
HTTP POST /chat â†’ Web Controller â†’ ConversationPort â†’ ConversationService â†’ LLMServicePort â†’ OpenAIAdapter
                                                                        â†“
                                                                DocumentRepositoryPort â†’ PostgreSQLAdapter
```

## ğŸ“‹ **í‘œì¤€ ë„¤ì´ë° ì»¨ë²¤ì…˜**

### **1. í¬íŠ¸ ì¸í„°í˜ì´ìŠ¤**
- **Inbound Ports**: `{Domain}ManagementPort`, `{Domain}ServicePort`
- **Outbound Ports**: `{Domain}RepositoryPort`, `{Domain}ServicePort`

### **2. ì–´ëŒ‘í„°**
- **Inbound Adapters**: `{Technology}{Type}Adapter` (ì˜ˆ: `FastAPIWebAdapter`)
- **Outbound Adapters**: `{Technology}{Type}Adapter` (ì˜ˆ: `PostgreSQLRepositoryAdapter`)

### **3. ì„œë¹„ìŠ¤**
- **Application Services**: `{Domain}Service`
- **Domain Services**: `{Domain}Service`

## âœ… **í‘œì¤€ ì›ì¹™**

### **1. ì˜ì¡´ì„± ê·œì¹™**
- Core â†’ Application â†’ Adapters (ë‹¨ë°©í–¥ ì˜ì¡´ì„±)
- ì™¸ë¶€ ì˜ì¡´ì„±ì€ Adaptersì—ë§Œ ì¡´ì¬
- CoreëŠ” ì–´ë–¤ ì™¸ë¶€ ì˜ì¡´ì„±ë„ ê°€ì§ˆ ìˆ˜ ì—†ìŒ

### **2. ì¸í„°í˜ì´ìŠ¤ ë¶„ë¦¬ ì›ì¹™**
- ê° í¬íŠ¸ëŠ” ë‹¨ì¼ ì±…ì„ì„ ê°€ì§
- í° ì¸í„°í˜ì´ìŠ¤ë¥¼ ì‘ì€ ì¸í„°í˜ì´ìŠ¤ë¡œ ë¶„ë¦¬

### **3. ì˜ì¡´ì„± ì—­ì „ ì›ì¹™**
- ê³ ìˆ˜ì¤€ ëª¨ë“ˆì´ ì €ìˆ˜ì¤€ ëª¨ë“ˆì— ì˜ì¡´í•˜ì§€ ì•ŠìŒ
- ë‘˜ ë‹¤ ì¶”ìƒí™”ì— ì˜ì¡´

### **4. ë‹¨ì¼ ì±…ì„ ì›ì¹™**
- ê° í´ë˜ìŠ¤ëŠ” í•˜ë‚˜ì˜ ë³€ê²½ ì´ìœ ë§Œ ê°€ì§
- ê° ê³„ì¸µì€ ëª…í™•í•œ ì±…ì„ì„ ê°€ì§

## ğŸš« **ê¸ˆì§€ì‚¬í•­**

### **1. Core Layerì—ì„œ ê¸ˆì§€**
- ì™¸ë¶€ ë¼ì´ë¸ŒëŸ¬ë¦¬ import
- ë°ì´í„°ë² ì´ìŠ¤ ì ‘ê·¼
- HTTP ìš”ì²­
- íŒŒì¼ ì‹œìŠ¤í…œ ì ‘ê·¼

### **2. Application Layerì—ì„œ ê¸ˆì§€**
- ì§ì ‘ì ì¸ ì™¸ë¶€ ì‹œìŠ¤í…œ ì ‘ê·¼
- í”„ë ˆì„ì›Œí¬ íŠ¹í™” ì½”ë“œ

### **3. Adapters Layerì—ì„œ ê¸ˆì§€**
- ë„ë©”ì¸ ë¡œì§ í¬í•¨
- ë¹„ì¦ˆë‹ˆìŠ¤ ê·œì¹™ í¬í•¨

ì´ í‘œì¤€ì„ ê¸°ë°˜ìœ¼ë¡œ ì‹¤ì œ êµ¬ì¡°ë¥¼ í‰ê°€í•˜ê³  ê°œì„ í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
